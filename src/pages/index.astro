---
// Original Instagram Stories Viewer interface restored
---

<html lang="en">
	<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-1WVG6TLBCZ"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-1WVG6TLBCZ');
    </script>
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>IGStoryPeek - Anonymous Instagram Stories Viewer</title>
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<link rel="canonical" href="https://www.igstorypeek.com/" />
		<meta name="generator" content={Astro.generator} />
    
    <!-- Performance: Preconnect to external domains -->
    <link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin />
    <link rel="preconnect" href="https://pagead2.googlesyndication.com" crossorigin />
    <link rel="dns-prefetch" href="https://cdnjs.cloudflare.com" />
    
    <!-- Primary Meta Tags -->
    <meta name="title" content="IGStoryPeek - Anonymous Instagram Stories Viewer" />
    <meta name="description" content="Anonymous Instagram Stories Viewer - Watch Instagram stories without an account. 100% anonymous browsing. View public profiles, posts, stories, and highlights." />
    <meta name="keywords" content="instagram stories viewer, anonymous instagram, instagram viewer, story viewer, instagram profile viewer, instagram posts viewer, anonymous browsing, instagram highlights" />
    <meta name="author" content="IGStoryPeek" />
    <meta name="robots" content="index, follow" />
    <meta name="language" content="English" />
    <meta name="revisit-after" content="7 days" />
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://www.igstorypeek.com/" />
    <meta property="og:title" content="IGStoryPeek - Anonymous Instagram Stories Viewer" />
    <meta property="og:description" content="Anonymous Instagram Stories Viewer - Watch Instagram stories without an account. 100% anonymous browsing." />
    <meta property="og:site_name" content="IGStoryPeek" />
    
    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:url" content="https://www.igstorypeek.com/" />
    <meta name="twitter:title" content="IGStoryPeek - Anonymous Instagram Stories Viewer" />
    <meta name="twitter:description" content="Anonymous Instagram Stories Viewer - Watch Instagram stories without an account. 100% anonymous browsing." />
    
    <!-- App Links -->
    <meta property="al:web:url" content="https://www.igstorypeek.com/" />
    
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet" media="print" onload="this.media='all'">
    <noscript><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet"></noscript>
    
    <!-- Google AdSense -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1279144350888956"
         crossorigin="anonymous"></script>
	</head>
	<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <h1>IGStoryPeek</h1>
                </div>
                <div class="language-selector">
                    <select id="languageSelect">
                        <option value="en">English</option>
                        <option value="it">Italiano</option>
                        <option value="de">Deutsch</option>
                        <option value="fr">Français</option>
                        <option value="es">Español</option>
                        <option value="tr">Türk</option>
                        <option value="ru">Русский</option>
                    </select>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main">
        <!-- Hero Section -->
        <section class="hero">
            <div class="container">
                <h2 class="hero-title">Anonymous Instagram browsing</h2>
                <p class="hero-subtitle">Enter needed username in the search bar using formats username, @username or https://www.instagram.com/username/</p>
                
                <div class="search-container">
                    <div class="search-box">
                        <input type="text" id="usernameInput" placeholder="Enter Instagram username..." class="search-input">
                        <button id="searchBtn" class="search-btn">Submit</button>
                    </div>
                </div>

                <div class="popular-users">
                    <p>Popular searches:</p>
                    <div class="user-tags">
                    </div>
                </div>
            </div>
        </section>

        <!-- Profile Display Section -->
        <section class="profile-display" id="profileDisplay" style="display: none;">
            <div class="container">
                <div class="profile-header">
                    <div class="profile-avatar">
                        <img id="profileImage" src="" alt="Profile" />
                    </div>
                    <div class="profile-info">
                        <h3 id="profileUsername">@username</h3>
                        <p id="profileName">Full Name</p>
                        <p id="profileBio">Bio text</p>
                        <div class="profile-stats">
                            <span id="postsCount">0 posts</span>
                            <span id="followersCount">0 followers</span>
                            <span id="followingCount">0 following</span>
                        </div>
                    </div>
                </div>
                
                <div class="content-tabs">
                    <button class="tab-btn active" data-tab="posts">Posts</button>
                    <button class="tab-btn" data-tab="stories">Stories</button>
                    <button class="tab-btn" data-tab="highlights">Highlights</button>
                </div>
                
                <div class="content-grid" id="contentGrid">
                    <!-- Content will be loaded here -->
                </div>
                
                <div class="stories-notice">
                    <div class="notice-card">
                        <div class="notice-icon">
                            <i class="fas fa-info-circle"></i>
                        </div>
                        <div class="notice-content">
                            <h4>Instagram Content Access</h4>
                            <p>We now have access to Instagram Stories, Posts, Highlights, and profile information through the IGStoryPeek service. This provides anonymous viewing of public Instagram content.</p>
                            <p><strong>What we can show:</strong> Stories, Posts, Highlights, and profile information from public accounts.</p>
                            <p><strong>Privacy:</strong> All viewing is anonymous - the account owner won't see your views in their statistics.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Story Viewer Modal -->
        <div id="storyModal" class="story-modal" style="display: none;">
            <div class="story-modal-content">
                <div class="story-header">
                    <div class="story-user-info">
                        <img id="storyUserAvatar" src="" alt="User" class="story-avatar">
                        <div class="story-user-details">
                            <span id="storyUsername" class="story-username">@username</span>
                            <span id="storyTime" class="story-time">2h ago</span>
                        </div>
                    </div>
                    <button class="story-close" onclick="closeStoryModal()">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                
                <div class="story-media-container">
                    <button class="story-nav story-nav-left" onclick="previousStory()">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                    
                    <div class="story-media">
                        <img id="storyImage" src="" alt="Story" style="display: none;">
                        <video id="storyVideo" controls style="display: none;">
                            <source src="" type="video/mp4">
                            Your browser does not support the video tag.
                        </video>
                    </div>
                    
                    <button class="story-nav story-nav-right" onclick="nextStory()">
                        <i class="fas fa-chevron-right"></i>
                    </button>
                </div>
                
                <div class="story-progress-container">
                    <div class="story-progress-bar">
                        <div id="storyProgress" class="story-progress"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Post Viewer Modal -->
        <div id="postModal" class="post-modal" style="display: none;">
            <div class="post-modal-content">
                <div class="post-modal-header">
                    <div class="post-user-info">
                        <img id="postUserAvatar" src="" alt="User" class="post-modal-avatar">
                        <div class="post-user-details">
                            <span id="postUsername" class="post-username">@username</span>
                        </div>
                    </div>
                    <button class="post-close" onclick="closePostModal()">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                
                <div class="post-modal-media-container">
                    <img id="postModalImage" src="" alt="Post" style="display: none;">
                    <video id="postModalVideo" controls style="display: none;">
                        <source src="" type="video/mp4">
                        Your browser does not support the video tag.
                    </video>
                </div>
                
                <div class="post-modal-stats">
                    <div class="post-stats-info">
                        <span id="postModalLikes"><i class="fas fa-heart"></i> 0</span>
                        <span id="postModalComments"><i class="fas fa-comment"></i> 0</span>
                    </div>
                    <button class="btn-view-post" onclick="viewPostOnInstagram()">
                        <i class="fab fa-instagram"></i> View on Instagram
                    </button>
                </div>
                
                <div class="post-caption" id="postModalCaption"></div>
            </div>
        </div>

        <!-- Features Section -->
        <section class="features">
            <div class="container">
                <h3>IGStoryPeek Features</h3>
                <p class="features-intro">IGStoryPeek is a free service for anonymous viewing of Instagram stories from open accounts that does not require user authorization in the Instagram social network. The functionality presented on the platform is completely free, allows you to watch stories anonymously and does not require any additional actions, except for the introduction of the user's nickname Instagram.</p>
                
                <div class="features-grid">
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-user-secret"></i>
                        </div>
                        <h4>100% anonymity</h4>
                        <p>The account owner does not see your data in their views statistics</p>
                    </div>
                    
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-user-plus"></i>
                        </div>
                        <h4>No account needed</h4>
                        <p>There is no need to create an Instagram account. You also have the opportunity to watch user stories and other multimedia publications without registration and application</p>
                    </div>
                    
                    <div class="feature-card">
                        <div class="feature-icon">
                            <i class="fas fa-download"></i>
                        </div>
                        <h4>Loading capability</h4>
                        <p>You can view, download and download stories, publications and other information for free on any device: computer, laptop, tablet or smartphone (Android, iOS and other operating systems)</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- How it Works Section -->
        <section class="how-it-works">
            <div class="container">
                <h3>How is hidden viewing of Instagram Stories?</h3>
                <div class="steps">
                    <div class="step">
                        <div class="step-number">1</div>
                        <p>You enter the name of a user that interests you</p>
                    </div>
                    <div class="step">
                        <div class="step-number">2</div>
                        <p>The entered nickname gets into the system and is processed by our bot</p>
                    </div>
                    <div class="step">
                        <div class="step-number">3</div>
                        <p>The service opens the user's page, where the latest relevant data is displayed</p>
                    </div>
                    <div class="step">
                        <div class="step-number">4</div>
                        <p>Instagram user stories store the name of one of our accounts</p>
                    </div>
                    <div class="step">
                        <div class="step-number">5</div>
                        <p>You remain anonymous</p>
                    </div>
                </div>
                <div class="cta-button">
                    <button class="btn-primary">To start searching</button>
                </div>
            </div>
        </section>

        <!-- FAQ Section -->
        <section class="faq">
            <div class="container">
                <h3>Frequently asked questions</h3>
                <div class="faq-list">
                    <div class="faq-item">
                        <div class="faq-question">
                            <h4>What can be downloaded and viewed using IGStoryPeek?</h4>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="faq-answer">
                            <p>Using the functions of the service, any user can download and watch anonymously Instagram stories, highlights, streams (live broadcasts), publications and photos from a profile that is open (is public) on Instagram. All of the listed content can be downloaded to your device using special interface elements.</p>
                        </div>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            <h4>Do you need an Instagram account to track someone else's profile?</h4>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="faq-answer">
                            <p>No. All open other people's profiles can be viewed by the user's nickname, not the name of their own Instagram profile. You just need to enter username in the input field on the main page, and then click the "Search" button. After clicking, you will immediately be taken to the page with the desired content, if the user has it.</p>
                        </div>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            <h4>What devices can IGStoryPeek be used on?</h4>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="faq-answer">
                            <p>The service in question is available in all modern browsers from a desktop computer, laptop, tablet and mobile smartphone (including modern mobile operating systems iPhone, Android). If on some device our website is not available to you, please let us know and we will try to fix it as soon as possible.</p>
                        </div>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            <h4>Can I download a story from someone else's profile anonymously?</h4>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="faq-answer">
                            <p>If this profile is public (that is, open, available without prior subscribing to the account), then you can, by entering the user's nickname, go to the profile page, from which you can download stories, photos, broadcasts, publications and other available information.</p>
                        </div>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            <h4>What is the cost of using IGStoryPeek?</h4>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="faq-answer">
                            <p>All functions of the service are available absolutely free of charge and without registration. Therefore, there is no need to fill in any data to gain access to the information provided.</p>
                        </div>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            <h4>How you can use downloaded Instagram stories / photos / videos?</h4>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="faq-answer">
                            <p>All files available for download are presented for review. The rights to Instagram stories / photos / videos belong to their owners. We strongly advise against using or modifying files for any purpose. However, from these materials you can pick up some idea by viewing and analyzing this or that material, get inspiration, as well as formulate and embed a content strategy for your future posts on social networks.</p>
                        </div>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            <h4>What file formats are available for download on instagram story viewer?</h4>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="faq-answer">
                            <p>All videos are available in .mp4 format, and all photos are in .jpg, .jpeg format. All downloads are available in the highest possible quality that can be received. This quality is quite enough to be able to analyze the viewed content. For example, it can serve as inspiration for your idea or for shaping a content strategy for running your own account.</p>
                        </div>
                    </div>

                    <div class="faq-item">
                        <div class="faq-question">
                            <h4>How do I open a downloaded story?</h4>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="faq-answer">
                            <p>To open and view the downloaded story, you can use any modern video player, if it's a video story, or any program for viewing images, if it's a photo story. You can also create a new tab in any modern browser and drag the photo / video material to this tab, and the browser will automatically open the file in the required format. It should be noted that our service provides special functionality that allows you to watch Instagram stories anonymously by clicking on the appropriate interface elements.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-logo">
                    <h3>IGStoryPeek</h3>
                </div>
                <div class="footer-links">
                    <div class="footer-section">
                        <h4>Navigation</h4>
                        <ul>
                            <li><a href="/">Home</a></li>
                            <li><a href="https://www.instagram.com/" target="_blank" rel="noopener">Instagram</a></li>
                            <li><a href="/terms">Terms & Conditions</a></li>
                            <li><a href="/privacy">Privacy Policy</a></li>
                            <li><a href="mailto:contact@igstorypeek.com">Contacts</a></li>
                        </ul>
                    </div>
                    <div class="footer-section">
                        <h4>Tools</h4>
                        <ul>
                            <li><a href="#" onclick="alert('This feature is coming soon!'); return false;">Instagram Video Downloader</a></li>
                            <li><a href="#" onclick="alert('You are already using the Instagram Story Viewer!'); return false;">Instagram Story Viewer</a></li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2020-2025 IGStoryPeek</p>
                <p class="disclaimer">IGStoryPeek is not connected with Instagram. We do not host Instagram Stories on our servers, all rights belong to their owners.</p>
            </div>
        </div>
    </footer>
	</body>
</html>

<style>
    /* Reset and Base Styles */
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }

    body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
        line-height: 1.6;
        color: #333;
        background-color: #f8f9fa;
    }

    .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 0 20px;
    }

    /* Header Styles */
    .header {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 1rem 0;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }

    .header-content {
        display: flex;
        justify-content: space-between;
        align-items: center;
    }

    .logo h1 {
        font-size: 1.8rem;
        font-weight: 700;
        letter-spacing: -0.5px;
    }

    .language-selector select {
        background: rgba(255,255,255,0.2);
        border: 1px solid rgba(255,255,255,0.3);
        color: white;
        padding: 8px 12px;
        border-radius: 6px;
        font-size: 14px;
        cursor: pointer;
    }

    .language-selector select option {
        background: #333;
        color: white;
    }

    /* Main Content */
    .main {
        min-height: calc(100vh - 200px);
    }

    /* Hero Section */
    .hero {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 4rem 0;
        text-align: center;
    }

    .hero-title {
        font-size: 2.5rem;
        font-weight: 700;
        margin-bottom: 1rem;
        letter-spacing: -1px;
    }

    .hero-subtitle {
        font-size: 1.2rem;
        margin-bottom: 2rem;
        opacity: 0.9;
        max-width: 600px;
        margin-left: auto;
        margin-right: auto;
    }

    .search-container {
        margin: 2rem 0;
    }

    .search-box {
        display: flex;
        max-width: 500px;
        margin: 0 auto;
        background: white;
        border-radius: 50px;
        overflow: hidden;
        box-shadow: 0 10px 30px rgba(0,0,0,0.2);
    }

    .search-input {
        flex: 1;
        padding: 15px 20px;
        border: none;
        outline: none;
        font-size: 16px;
        color: #333;
    }

    .search-input::placeholder {
        color: #999;
    }

    .search-btn {
        background: #ff6b6b;
        color: white;
        border: none;
        padding: 15px 30px;
        font-size: 16px;
        font-weight: 600;
        cursor: pointer;
        transition: background 0.3s ease;
    }

    .search-btn:hover {
        background: #ff5252;
    }

    .popular-users {
        margin-top: 2rem;
    }

    .popular-users p {
        margin-bottom: 1rem;
        opacity: 0.8;
    }

    .user-tags {
        display: flex;
        gap: 1rem;
        justify-content: center;
        flex-wrap: wrap;
    }

    .user-tag {
        background: rgba(255,255,255,0.2);
        padding: 8px 16px;
        border-radius: 20px;
        cursor: pointer;
        transition: background 0.3s ease;
        font-weight: 500;
    }

    .user-tag:hover {
        background: rgba(255,255,255,0.3);
    }

    /* Features Section */
    .features {
        padding: 4rem 0;
        background: white;
    }

    .features h3 {
        text-align: center;
        font-size: 2rem;
        margin-bottom: 1rem;
        color: #333;
    }

    .features-intro {
        text-align: center;
        font-size: 1.1rem;
        color: #666;
        max-width: 800px;
        margin: 0 auto 3rem;
        line-height: 1.7;
    }

    .features-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 2rem;
        margin-top: 3rem;
    }

    .feature-card {
        text-align: center;
        padding: 2rem;
        border-radius: 12px;
        background: #f8f9fa;
        transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .feature-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 30px rgba(0,0,0,0.1);
    }

    .feature-icon {
        font-size: 3rem;
        color: #667eea;
        margin-bottom: 1rem;
    }

    .feature-card h4 {
        font-size: 1.3rem;
        margin-bottom: 1rem;
        color: #333;
    }

    .feature-card p {
        color: #666;
        line-height: 1.6;
    }

    /* How it Works Section */
    .how-it-works {
        padding: 4rem 0;
        background: #f8f9fa;
    }

    .how-it-works h3 {
        text-align: center;
        font-size: 2rem;
        margin-bottom: 3rem;
        color: #333;
    }

    .steps {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 2rem;
        margin-bottom: 3rem;
    }

    .step {
        text-align: center;
        padding: 1.5rem;
    }

    .step-number {
        width: 60px;
        height: 60px;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.5rem;
        font-weight: 700;
        margin: 0 auto 1rem;
    }

    .step p {
        color: #666;
        font-size: 0.95rem;
        line-height: 1.5;
    }

    .cta-button {
        text-align: center;
    }

    .btn-primary {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        border: none;
        padding: 15px 30px;
        font-size: 1.1rem;
        font-weight: 600;
        border-radius: 50px;
        cursor: pointer;
        transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .btn-primary:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
    }

    /* FAQ Section */
    .faq {
        padding: 4rem 0;
        background: white;
    }

    .faq h3 {
        text-align: center;
        font-size: 2rem;
        margin-bottom: 3rem;
        color: #333;
    }

    .faq-list {
        max-width: 800px;
        margin: 0 auto;
    }

    .faq-item {
        border: 1px solid #e9ecef;
        border-radius: 8px;
        margin-bottom: 1rem;
        overflow: hidden;
    }

    .faq-question {
        padding: 1.5rem;
        background: #f8f9fa;
        cursor: pointer;
        display: flex;
        justify-content: space-between;
        align-items: center;
        transition: background 0.3s ease;
    }

    .faq-question:hover {
        background: #e9ecef;
    }

    .faq-question h4 {
        font-size: 1.1rem;
        color: #333;
        margin: 0;
        flex: 1;
        margin-right: 1rem;
    }

    .faq-question i {
        color: #667eea;
        transition: transform 0.3s ease;
    }

    .faq-item.active .faq-question i {
        transform: rotate(180deg);
    }

    .faq-answer {
        padding: 0 1.5rem;
        max-height: 0;
        overflow: hidden;
        transition: max-height 0.3s ease, padding 0.3s ease;
    }

    .faq-item.active .faq-answer {
        max-height: 500px;
        padding: 1.5rem;
    }

    .faq-answer p {
        color: #666;
        line-height: 1.6;
    }

    /* Footer */
    .footer {
        background: #333;
        color: white;
        padding: 3rem 0 1rem;
    }

    .footer-content {
        display: grid;
        grid-template-columns: 1fr 2fr;
        gap: 3rem;
        margin-bottom: 2rem;
    }

    .footer-logo h3 {
        font-size: 1.5rem;
        margin-bottom: 1rem;
    }

    .footer-links {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 2rem;
    }

    .footer-section h4 {
        margin-bottom: 1rem;
        color: #fff;
    }

    .footer-section ul {
        list-style: none;
    }

    .footer-section ul li {
        margin-bottom: 0.5rem;
    }

    .footer-section ul li a {
        color: #ccc;
        text-decoration: none;
        transition: color 0.3s ease;
    }

    .footer-section ul li a:hover {
        color: white;
    }

    .footer-bottom {
        border-top: 1px solid #555;
        padding-top: 1rem;
        text-align: center;
    }

    .footer-bottom p {
        color: #ccc;
        margin-bottom: 0.5rem;
    }

    .disclaimer {
        font-size: 0.9rem;
        opacity: 0.8;
    }

    /* Responsive Design */
    @media (max-width: 768px) {
        .header-content {
            flex-direction: column;
            gap: 1rem;
        }

        .hero-title {
            font-size: 2rem;
        }

        .hero-subtitle {
            font-size: 1rem;
        }

        .search-box {
            flex-direction: column;
            border-radius: 12px;
        }

        .search-input {
            border-radius: 12px 12px 0 0;
        }

        .search-btn {
            border-radius: 0 0 12px 12px;
        }

        .features-grid {
            grid-template-columns: 1fr;
        }

        .steps {
            grid-template-columns: 1fr;
        }

        .footer-content {
            grid-template-columns: 1fr;
            gap: 2rem;
        }

        .footer-links {
            grid-template-columns: 1fr;
        }
    }

    @media (max-width: 480px) {
        .container {
            padding: 0 15px;
        }

        .hero {
            padding: 2rem 0;
        }

        .hero-title {
            font-size: 1.8rem;
        }

        .features, .how-it-works, .faq {
            padding: 2rem 0;
        }

        .feature-card {
            padding: 1.5rem;
        }

        .faq-question {
            padding: 1rem;
        }

        .faq-question h4 {
            font-size: 1rem;
        }
    }

    /* Loading Animation */
    .loading {
        display: inline-block;
        width: 20px;
        height: 20px;
        border: 3px solid rgba(255,255,255,.3);
        border-radius: 50%;
        border-top-color: #fff;
        animation: spin 1s ease-in-out infinite;
    }

    @keyframes spin {
        to { transform: rotate(360deg); }
    }

    /* Success/Error Messages */
    .message {
        padding: 1rem;
        border-radius: 8px;
        margin: 1rem 0;
        text-align: center;
    }

    .message.success {
        background: #d4edda;
        color: #155724;
        border: 1px solid #c3e6cb;
    }

    .message.error {
        background: #f8d7da;
        color: #721c24;
        border: 1px solid #f5c6cb;
    }

    /* Profile Display Section */
    .profile-display {
        padding: 4rem 0;
        background: white;
    }

    .profile-header {
        display: flex;
        align-items: center;
        gap: 2rem;
        margin-bottom: 2rem;
        padding: 2rem;
        background: #f8f9fa;
        border-radius: 12px;
    }

    .profile-avatar img {
        width: 120px;
        height: 120px;
        border-radius: 50%;
        object-fit: cover;
        border: 3px solid #667eea;
    }

    .profile-info h3 {
        font-size: 1.5rem;
        margin-bottom: 0.5rem;
        color: #333;
    }

    .profile-info p {
        color: #666;
        margin-bottom: 0.5rem;
        min-height: 1.5em; /* Prevent layout shift on content change */
    }

    .profile-stats {
        display: flex;
        gap: 2rem;
        margin-top: 1rem;
    }

    .profile-stats span {
        font-weight: 600;
        color: #333;
    }

    .content-tabs {
        display: flex;
        gap: 1rem;
        margin-bottom: 2rem;
        border-bottom: 1px solid #e9ecef;
    }

    .tab-btn {
        background: none;
        border: none;
        padding: 1rem 2rem;
        cursor: pointer;
        font-size: 1rem;
        color: #666;
        border-bottom: 2px solid transparent;
        transition: all 0.3s ease;
    }

    .tab-btn.active {
        color: #667eea;
        border-bottom-color: #667eea;
    }

    /* 4x4 Grid Layout */
    :global(.content-grid) {
        display: grid !important;
        grid-template-columns: repeat(4, 1fr) !important;
        gap: 2px !important;
        width: 100%;
        max-width: 100% !important;
        margin: 20px auto;
        padding: 0;
    }

    :global(.content-item) {
        aspect-ratio: 1 !important;
        background: white;
        border-radius: 8px !important;
        overflow: hidden;
        position: relative;
        cursor: pointer;
        transition: transform 0.2s ease, box-shadow 0.2s ease;
        box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        width: 100% !important;
    }

    :global(.content-item:hover) {
        transform: scale(1.05);
        box-shadow: 0 4px 16px rgba(0,0,0,0.15);
    }

    :global(.content-item img) {
        width: 100% !important;
        height: 100% !important;
        object-fit: cover !important;
        display: block;
    }

    :global(.post-stats) {
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        background: linear-gradient(transparent, rgba(0,0,0,0.7));
        color: white;
        padding: 8px;
        font-size: 12px;
        display: flex;
        justify-content: space-between;
    }

    :global(.post-stats span) {
        display: flex;
        align-items: center;
        gap: 4px;
    }

    @media (max-width: 768px) {
        :global(.content-grid) {
            grid-template-columns: repeat(3, 1fr) !important;
            max-width: 100% !important;
            gap: 2px !important;
        }
    }

    @media (max-width: 480px) {
        :global(.content-grid) {
            grid-template-columns: repeat(2, 1fr) !important;
            max-width: 100% !important;
            gap: 2px !important;
        }
    }

    /* Story and Highlight specific styles */
    .story-item, .highlight-item {
        position: relative;
        cursor: pointer;
        transition: transform 0.3s ease;
    }

    .story-item:hover, .highlight-item:hover {
        transform: scale(1.05);
    }

    .story-overlay, .highlight-overlay {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.5);
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-size: 1.5rem;
        opacity: 0;
        transition: opacity 0.3s ease;
    }

    .story-item:hover .story-overlay,
    .highlight-item:hover .highlight-overlay {
        opacity: 1;
    }

    .highlight-overlay span {
        font-size: 0.9rem;
        text-align: center;
        padding: 0.5rem;
    }

    /* Story Modal Styles */
    .story-modal {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.9);
        z-index: 1000;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .story-modal-content {
        width: 90%;
        max-width: 500px;
        height: 80%;
        background: #000;
        border-radius: 20px;
        overflow: hidden;
        position: relative;
        display: flex;
        flex-direction: column;
    }

    .story-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 15px 20px;
        background: rgba(0, 0, 0, 0.8);
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        z-index: 10;
    }

    .story-user-info {
        display: flex;
        align-items: center;
        gap: 10px;
    }

    .story-avatar {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        object-fit: cover;
    }

    .story-user-details {
        display: flex;
        flex-direction: column;
    }

    .story-username {
        color: white;
        font-weight: 600;
        font-size: 14px;
    }

    .story-time {
        color: #ccc;
        font-size: 12px;
    }

    .story-close {
        background: none;
        border: none;
        color: white;
        font-size: 20px;
        cursor: pointer;
        padding: 5px;
        border-radius: 50%;
        transition: background 0.2s;
    }

    .story-close:hover {
        background: rgba(255, 255, 255, 0.1);
    }

    .story-media-container {
        flex: 1;
        position: relative;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .story-media {
        width: 100%;
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .story-media img,
    .story-media video {
        max-width: 100%;
        max-height: 100%;
        object-fit: contain;
    }

    .story-nav {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        background: rgba(255, 255, 255, 0.2);
        border: none;
        color: white;
        width: 50px;
        height: 50px;
        border-radius: 50%;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 18px;
        transition: background 0.2s;
        z-index: 10;
    }

    .story-nav:hover {
        background: rgba(255, 255, 255, 0.3);
    }

    .story-nav-left {
        left: 20px;
    }

    .story-nav-right {
        right: 20px;
    }

    .story-progress-container {
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        padding: 15px 20px;
        background: rgba(0, 0, 0, 0.8);
    }

    .story-progress-bar {
        width: 100%;
        height: 3px;
        background: rgba(255, 255, 255, 0.3);
        border-radius: 2px;
        overflow: hidden;
    }

    .story-progress {
        height: 100%;
        background: white;
        width: 0%;
        transition: width 0.1s linear;
    }

    /* Mobile responsive for story modal */
    @media (max-width: 768px) {
        .story-modal-content {
            width: 100%;
            height: 100%;
            border-radius: 0;
        }
        
        .story-nav {
            width: 40px;
            height: 40px;
            font-size: 16px;
        }
        
        .story-nav-left {
            left: 10px;
        }
        
        .story-nav-right {
            right: 10px;
        }
        
        .story-header {
            padding: 10px 15px;
        }
        
        .story-avatar {
            width: 35px;
            height: 35px;
        }
        
        .story-username {
            font-size: 13px;
        }
        
        .story-time {
            font-size: 11px;
        }
    }

    /* Post Modal Styles */
    .post-modal {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.95);
        z-index: 1001;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .post-modal-content {
        width: 90%;
        max-width: 900px;
        height: 90%;
        background: white;
        border-radius: 20px;
        overflow: hidden;
        position: relative;
        display: flex;
        flex-direction: column;
    }

    .post-modal-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 15px 20px;
        background: white;
        border-bottom: 1px solid #eee;
    }

    .post-user-info {
        display: flex;
        align-items: center;
        gap: 10px;
    }

    .post-modal-avatar {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        object-fit: cover;
    }

    .post-username {
        color: #333;
        font-weight: 600;
        font-size: 14px;
    }

    .post-close {
        background: none;
        border: none;
        color: #333;
        font-size: 24px;
        cursor: pointer;
        padding: 5px;
        border-radius: 50%;
        transition: background 0.2s;
    }

    .post-close:hover {
        background: rgba(0, 0, 0, 0.05);
    }

    .post-modal-media-container {
        flex: 1;
        display: flex;
        align-items: center;
        justify-content: center;
        background: #fafafa;
        overflow: hidden;
    }

    .post-modal-media-container img,
    .post-modal-media-container video {
        max-width: 100%;
        max-height: 100%;
        object-fit: contain;
    }

    .post-modal-stats {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 15px 20px;
        background: white;
        border-top: 1px solid #eee;
    }

    .post-stats-info {
        display: flex;
        gap: 20px;
    }

    .post-stats-info span {
        display: flex;
        align-items: center;
        gap: 5px;
        color: #333;
        font-weight: 600;
        font-size: 14px;
    }

    .btn-view-post {
        background: #e1306c;
        color: white;
        border: none;
        padding: 8px 16px;
        border-radius: 8px;
        cursor: pointer;
        font-size: 14px;
        font-weight: 600;
        display: flex;
        align-items: center;
        gap: 8px;
        transition: background 0.2s;
    }

    .btn-view-post:hover {
        background: #c13584;
    }

    .post-caption {
        padding: 15px 20px;
        background: white;
        max-height: 150px;
        overflow-y: auto;
        border-top: 1px solid #eee;
        font-size: 14px;
        color: #333;
        line-height: 1.6;
    }

    .video-indicator {
        position: absolute;
        top: 10px;
        right: 10px;
        background: rgba(0, 0, 0, 0.7);
        color: white;
        padding: 5px 8px;
        border-radius: 50%;
        font-size: 0.8rem;
    }

    /* Mobile responsive for post modal */
    @media (max-width: 768px) {
        .post-modal-content {
            width: 100%;
            height: 100%;
            border-radius: 0;
        }
        
        .post-modal-header {
            padding: 10px 15px;
        }
        
        .post-modal-avatar {
            width: 35px;
            height: 35px;
        }
        
        .post-username {
            font-size: 13px;
        }
        
        .post-close {
            font-size: 20px;
        }
        
        .post-stats-info {
            gap: 15px;
        }
        
        .post-stats-info span {
            font-size: 13px;
        }
        
        .btn-view-post {
            padding: 6px 12px;
            font-size: 12px;
        }
        
        .post-caption {
            padding: 10px 15px;
            max-height: 100px;
            font-size: 13px;
        }
    }

    .stories-notice {
        margin-top: 3rem;
    }

    .notice-card {
        background: #d4edda;
        border: 1px solid #c3e6cb;
        border-radius: 12px;
        padding: 2rem;
        display: flex;
        gap: 1rem;
        align-items: flex-start;
    }

    .notice-icon {
        font-size: 2rem;
        color: #155724;
        margin-top: 0.5rem;
    }

    .notice-content h4 {
        color: #155724;
        margin-bottom: 1rem;
        font-size: 1.2rem;
    }

    .notice-content p {
        color: #155724;
        margin-bottom: 0.5rem;
        line-height: 1.6;
    }

    .notice-content strong {
        color: #0c5460;
    }
</style>

<script>
    // DOM Elements
    const usernameInput = document.getElementById('usernameInput');
    const searchBtn = document.getElementById('searchBtn');
    const languageSelect = document.getElementById('languageSelect');
    const userTags = document.querySelectorAll('.user-tag');
    const faqItems = document.querySelectorAll('.faq-item');
    const profileDisplay = document.getElementById('profileDisplay');

    // Language translations
    const translations = {
        en: {
            title: "Anonymous Instagram browsing",
            subtitle: "Enter needed username in the search bar using formats username, @username or https://www.instagram.com/username/",
            placeholder: "Enter Instagram username...",
            submit: "Submit",
            popularSearches: "Popular searches:",
            features: "IGStoryPeek Features",
            featuresIntro: "IGStoryPeek is a free service for anonymous viewing of Instagram stories from open accounts that does not require user authorization in the Instagram social network. The functionality presented on the platform is completely free, allows you to watch stories anonymously and does not require any additional actions, except for the introduction of the user's nickname Instagram.",
            anonymity: "100% anonymity",
            anonymityDesc: "The account owner does not see your data in their views statistics",
            noAccount: "No account needed",
            noAccountDesc: "There is no need to create an Instagram account. You also have the opportunity to watch user stories and other multimedia publications without registration and application",
            loading: "Loading capability",
            loadingDesc: "You can view, download and download stories, publications and other information for free on any device: computer, laptop, tablet or smartphone (Android, iOS and other operating systems)",
            howItWorks: "How is hidden viewing of Instagram Stories?",
            step1: "You enter the name of a user that interests you",
            step2: "The entered nickname gets into the system and is processed by our bot",
            step3: "The service opens the user's page, where the latest relevant data is displayed",
            step4: "Instagram user stories store the name of one of our accounts",
            step5: "You remain anonymous",
            startSearching: "To start searching",
            faq: "Frequently asked questions"
        },
        it: {
            title: "Navigazione Instagram anonima",
            subtitle: "Inserisci il nome utente necessario nella barra di ricerca utilizzando i formati username, @username o https://www.instagram.com/username/",
            placeholder: "Inserisci nome utente Instagram...",
            submit: "Invia",
            popularSearches: "Ricerche popolari:",
            features: "Caratteristiche IGStoryPeek",
            featuresIntro: "IGStoryPeek è un servizio gratuito per la visualizzazione anonima delle storie Instagram da account aperti che non richiede autorizzazione utente nel social network Instagram.",
            anonymity: "100% anonimato",
            anonymityDesc: "Il proprietario dell'account non vede i tuoi dati nelle loro statistiche di visualizzazione",
            noAccount: "Nessun account necessario",
            noAccountDesc: "Non è necessario creare un account Instagram. Hai anche l'opportunità di guardare le storie degli utenti e altre pubblicazioni multimediali senza registrazione e applicazione",
            loading: "Capacità di caricamento",
            loadingDesc: "Puoi visualizzare, scaricare e scaricare storie, pubblicazioni e altre informazioni gratuitamente su qualsiasi dispositivo: computer, laptop, tablet o smartphone (Android, iOS e altri sistemi operativi)",
            howItWorks: "Come funziona la visualizzazione nascosta delle Storie Instagram?",
            step1: "Inserisci il nome di un utente che ti interessa",
            step2: "Il nickname inserito entra nel sistema e viene elaborato dal nostro bot",
            step3: "Il servizio apre la pagina dell'utente, dove vengono visualizzati i dati rilevanti più recenti",
            step4: "Le storie degli utenti Instagram memorizzano il nome di uno dei nostri account",
            step5: "Rimani anonimo",
            startSearching: "Per iniziare la ricerca",
            faq: "Domande frequenti"
        }
    };

    // Initialize the application
    document.addEventListener('DOMContentLoaded', function() {
        initializeEventListeners();
        initializeFAQ();
        initializeLanguageSelector();
    });

    // Event Listeners
    function initializeEventListeners() {
        // Search functionality
        searchBtn.addEventListener('click', handleSearch);
        usernameInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                handleSearch();
            }
        });

        // Popular user tags
        userTags.forEach(tag => {
            tag.addEventListener('click', function() {
                const username = this.textContent.replace('@', '');
                usernameInput.value = username;
                handleSearch();
            });
        });

        // CTA button
        const ctaButton = document.querySelector('.btn-primary');
        if (ctaButton) {
            ctaButton.addEventListener('click', function() {
                usernameInput.scrollIntoView({ behavior: 'smooth' });
                usernameInput.focus();
            });
        }
    }

    // Search functionality
    function handleSearch() {
        const username = usernameInput.value.trim();
        
        if (!username) {
            showMessage('Please enter a username', 'error');
            return;
        }

        // Clean username (remove @ and URLs)
        const cleanUsername = username
            .replace(/^@/, '')
            .replace(/^https?:\/\/(www\.)?instagram\.com\//, '')
            .replace(/\/$/, '')
            .trim();

        if (!cleanUsername) {
            showMessage('Please enter a valid username', 'error');
            return;
        }

        // Show loading state
        searchBtn.disabled = true;
        searchBtn.innerHTML = 'Loading...';

        // Make API call to backend immediately
        fetch(`/api/full/${cleanUsername}`)
            .then(response => {
                if (!response.ok) {
                    console.error('Response not OK:', response.status, response.statusText);
                }
                return response.json();
            })
            .then(data => {
                // Reset button
                searchBtn.innerHTML = 'Submit';
                searchBtn.disabled = false;

                if (data.success) {
                    showMessage(`Found profile: @${cleanUsername}`, 'success');
                    // Show profile data on the website instead of redirecting
                    showProfileData(data.data);
                } else {
                    showMessage(data.error || 'Profile not found', 'error');
                }
            })
            .catch(error => {
                // Reset button
                searchBtn.innerHTML = 'Submit';
                searchBtn.disabled = false;
                
                console.error('Fetch error:', error);
                showMessage('Error connecting to server. Please try again.', 'error');
            });
    }

    // FAQ functionality
    function initializeFAQ() {
        faqItems.forEach(item => {
            const question = item.querySelector('.faq-question');
            question.addEventListener('click', function() {
                toggleFAQ(item);
            });
        });
    }

    function toggleFAQ(item) {
        const isActive = item.classList.contains('active');
        
        // Close all FAQ items
        faqItems.forEach(faqItem => {
            faqItem.classList.remove('active');
        });
        
        // Open clicked item if it wasn't active
        if (!isActive) {
            item.classList.add('active');
        }
    }

    // Language selector functionality
    function initializeLanguageSelector() {
        languageSelect.addEventListener('change', function() {
            const selectedLanguage = this.value;
            updateLanguage(selectedLanguage);
        });
    }

    function updateLanguage(language) {
        const translation = translations[language];
        if (!translation) return;

        // Update page content
        document.querySelector('.hero-title').textContent = translation.title;
        document.querySelector('.hero-subtitle').textContent = translation.subtitle;
        document.querySelector('.search-input').placeholder = translation.placeholder;
        document.querySelector('.search-btn').textContent = translation.submit;
        document.querySelector('.popular-users p').textContent = translation.popularSearches;
        document.querySelector('.features h3').textContent = translation.features;
        document.querySelector('.features-intro').textContent = translation.featuresIntro;
        document.querySelector('.how-it-works h3').textContent = translation.howItWorks;
        document.querySelector('.btn-primary').textContent = translation.startSearching;
        document.querySelector('.faq h3').textContent = translation.faq;

        // Update feature cards
        const featureCards = document.querySelectorAll('.feature-card');
        if (featureCards.length >= 3) {
            featureCards[0].querySelector('h4').textContent = translation.anonymity;
            featureCards[0].querySelector('p').textContent = translation.anonymityDesc;
            featureCards[1].querySelector('h4').textContent = translation.noAccount;
            featureCards[1].querySelector('p').textContent = translation.noAccountDesc;
            featureCards[2].querySelector('h4').textContent = translation.loading;
            featureCards[2].querySelector('p').textContent = translation.loadingDesc;
        }

        // Update steps
        const steps = document.querySelectorAll('.step');
        if (steps.length >= 5) {
            steps[0].querySelector('p').textContent = translation.step1;
            steps[1].querySelector('p').textContent = translation.step2;
            steps[2].querySelector('p').textContent = translation.step3;
            steps[3].querySelector('p').textContent = translation.step4;
            steps[4].querySelector('p').textContent = translation.step5;
        }
    }

    // Show profile data on the website
    function showProfileData(apiData) {
        // Extract data from RapidAPI response structure
        const profileData = apiData.profile?.result || apiData.profile?.data || apiData.profile || {};
        const postsData = apiData.posts?.result || apiData.posts?.data || apiData.posts || {};
        const storiesData = apiData.stories?.result || apiData.stories?.data || apiData.stories || {};
        const highlightsData = apiData.highlights?.result || apiData.highlights?.data || apiData.highlights || {};
        
        // Get user info from profile data
        const username = profileData.username || apiData.username;
        const fullName = profileData.full_name || username;
        const bio = profileData.biography || 'No bio available';
        const profileImage = profileData.profile_pic_url || '';
        
        // Get stats from profile data
        const postsCount = profileData.edge_owner_to_timeline_media?.count || 0;
        const followers = profileData.edge_followed_by?.count || 0;
        const following = profileData.edge_follow?.count || 0;
        
        // Update profile info with real data
        document.getElementById('profileUsername').textContent = `@${username}`;
        document.getElementById('profileName').textContent = fullName;
        document.getElementById('profileBio').textContent = bio;
        document.getElementById('postsCount').textContent = `${postsCount} posts`;
        document.getElementById('followersCount').textContent = `${formatNumber(followers)} followers`;
        document.getElementById('followingCount').textContent = `${formatNumber(following)} following`;
        
        // Update profile image with proxy URL to avoid CORS issues on production
        const profileImageEl = document.getElementById('profileImage');
        if (profileImage) {
            const proxyUrl = `/api/image-proxy?url=${encodeURIComponent(profileImage)}`;
            profileImageEl.src = proxyUrl;
            profileImageEl.alt = fullName;
            profileImageEl.onerror = function() {
                this.style.display = 'none';
                const fallback = document.createElement('div');
                fallback.style.cssText = 'width:100px; height:100px; background:#f3f4f6; border-radius:50%; display:flex; align-items:center; justify-content:center; color:#9ca3af; font-size:12px; text-align:center;';
                fallback.textContent = 'Profile image blocked by Instagram';
                this.parentNode.insertBefore(fallback, this);
            };
        }

        // Show profile display section
        profileDisplay.style.display = 'block';
        profileDisplay.scrollIntoView({ behavior: 'auto', block: 'start' });

        // Store current profile data for tab switching
        // Extract posts from various possible structures
        let posts = [];
        if (postsData.edges) {
            posts = postsData.edges;
        } else if (postsData.data && postsData.data.edges) {
            posts = postsData.data.edges;
        } else if (postsData.data && postsData.data.edge_owner_to_timeline_media && postsData.data.edge_owner_to_timeline_media.edges) {
            posts = postsData.data.edge_owner_to_timeline_media.edges;
        } else if (Array.isArray(postsData)) {
            posts = postsData;
        }
        
        window.currentProfileData = {
            username: username,
            fullName: fullName,
            bio: bio,
            profileImage: profileImage,
            followers: followers,
            following: following,
            postsCount: postsCount,
            posts: posts,
            stories: storiesData.edges || storiesData || [],
            highlights: highlightsData.tray || highlightsData.edges || (Array.isArray(highlightsData) ? highlightsData : [])
        };

        // Load posts by default
        loadPosts(window.currentProfileData.posts);
    }

    // Tab switching functionality
    document.querySelectorAll('.tab-btn').forEach(btn => {
        btn.addEventListener('click', function() {
            // Remove active class from all tabs
            document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
            // Add active class to clicked tab
            this.classList.add('active');
            
            // Get the current profile data
            const currentData = window.currentProfileData;
            if (!currentData) return;
            
            const tabName = this.getAttribute('data-tab');
            switchTab(tabName, currentData);
        });
    });

    // Switch tab content
    function switchTab(tabName, profileData) {
        const contentGrid = document.getElementById('contentGrid');
        
        switch(tabName) {
            case 'stories':
                loadStories(profileData.stories || []);
                break;
            case 'posts':
                loadPosts(profileData.posts || []);
                break;
            case 'highlights':
                loadHighlights(profileData.highlights || []);
                break;
        }
    }

    // Load stories
    function loadStories(stories) {
        const contentGrid = document.getElementById('contentGrid');
        
        if (!stories || stories.length === 0) {
            contentGrid.innerHTML = '<div style="grid-column: 1/-1; text-align: center; padding: 2rem; color: #666;">No stories available. Stories are only accessible through IGStoryPeek service.</div>';
            return;
        }

        const storiesContent = stories.map((story, index) => {
            // Handle RapidAPI story structure
            const node = story.node || story;
            const isVideo = node.is_video || node.media_type === 2;
            const imageVersions = node.image_versions2?.candidates || [];
            const thumbnailUrl = imageVersions.length > 0 ? imageVersions[0].url : '';
            const storyUrl = `https://www.instagram.com/stories/${node.owner?.username || 'unknown'}/${node.id}/`;
            const videoIcon = isVideo ? '<div class="video-indicator"><i class="fas fa-play"></i></div>' : '';
            
            // Use proxy URL directly to avoid CORS issues on production
            const proxyUrl = thumbnailUrl ? `/api/image-proxy?url=${encodeURIComponent(thumbnailUrl)}` : '';
            const showFallback = !proxyUrl ? 'display:flex;' : 'display:none;';
            return `
                <div class="content-item story-item" data-story-index="${index}">
                    ${proxyUrl ? `<img src="${proxyUrl}" alt="Story" loading="lazy" 
                         onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';" />` : ''}
                    <div class="image-fallback" style="${showFallback} width:100%; height:100%; background:#f3f4f6; align-items:center; justify-content:center; color:#9ca3af; font-size:14px;">
                        <span>Story blocked by Instagram</span>
                    </div>
                    ${videoIcon}
                    <div class="story-overlay">
                        <i class="fas fa-eye"></i>
                    </div>
                </div>
            `;
        }).join('');

        contentGrid.innerHTML = storiesContent;
        
        // Add click listeners to story items
        contentGrid.querySelectorAll('.story-item').forEach((item, index) => {
            item.addEventListener('click', () => {
                openStory(stories[index]);
            });
        });
    }

    // Load posts
    function loadPosts(posts) {
        const contentGrid = document.getElementById('contentGrid');
        
        if (!posts || posts.length === 0) {
            contentGrid.innerHTML = '<div style="grid-column: 1/-1; text-align: center; padding: 2rem; color: #666;">No posts available.</div>';
            return;
        }

        const postsContent = posts.map(post => {
            // Handle RapidAPI post structure
            const node = post.node || post;
            const isVideo = node.media_type === 2 || node.is_video;
            const imageVersions = node.image_versions2?.candidates || [];
            const mediaUrl = imageVersions.length > 0 ? imageVersions[0].url : '';
            const caption = node.caption?.text || 'Instagram Post';
            const likes = node.like_count || 0;
            const comments = node.comment_count || 0;
            const postUrl = `https://www.instagram.com/p/${node.code}/`;
            const videoIcon = isVideo ? '<div class="video-indicator"><i class="fas fa-play"></i></div>' : '';
            
            // Format date like in the image
            const postDate = new Date(node.taken_at * 1000).toLocaleString('en-GB', {
                day: '2-digit',
                month: 'long',
                year: 'numeric',
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit'
            });
            
            // Use proxy URL directly to avoid CORS issues on production
            const proxyUrl = mediaUrl ? `/api/image-proxy?url=${encodeURIComponent(mediaUrl)}` : '';
            const showFallback = !proxyUrl ? 'display:flex;' : 'display:none;';
            return `
                <div class="content-item post-item" data-post-index="${posts.indexOf(post)}">
                    ${proxyUrl ? `<img src="${proxyUrl}" alt="${caption.substring(0, 50)}..." loading="lazy" 
                         onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';" />` : ''}
                    <div class="image-fallback" style="${showFallback} width:100%; height:100%; background:#f3f4f6; align-items:center; justify-content:center; color:#9ca3af; font-size:14px;">
                        <span>Image blocked by Instagram</span>
                    </div>
                    ${videoIcon}
                    <div class="post-stats">
                        <span><i class="fas fa-heart"></i> ${formatNumber(likes)}</span>
                        <span><i class="fas fa-comment"></i> ${formatNumber(comments)}</span>
                    </div>
                </div>
            `;
        }).join('');

        contentGrid.innerHTML = postsContent;
        
        // Add click listeners to post items
        contentGrid.querySelectorAll('.post-item').forEach((item, index) => {
            item.addEventListener('click', () => {
                openPostModal(posts[index]);
            });
        });
    }

    // Load highlights
    function loadHighlights(highlights) {
        const contentGrid = document.getElementById('contentGrid');
        
        if (!highlights || highlights.length === 0) {
            contentGrid.innerHTML = '<div style="grid-column: 1/-1; text-align: center; padding: 2rem; color: #666;">No highlights available.</div>';
            return;
        }

        const highlightsContent = highlights.map(highlight => {
            // Handle RapidAPI highlight structure
            const node = highlight.node || highlight;
            const coverMedia = node.cover_media || {};
            const coverCandidates = coverMedia.image_versions2?.candidates || [];
            const coverUrl = coverCandidates.length > 0 ? coverCandidates[0].url : '';
            const title = node.title || 'Highlight';
            const highlightUrl = `https://www.instagram.com/stories/highlights/${node.id}/`;
            
            // Use proxy URL directly if we have a cover URL
            const proxyUrl = coverUrl ? `/api/image-proxy?url=${encodeURIComponent(coverUrl)}` : '';
            
            return `
                <div class="content-item highlight-item" onclick="openHighlight('${highlightUrl}')">
                    ${coverUrl ? `<img src="${proxyUrl}" alt="${title}" loading="lazy"
                         onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';" />` : ''}
                    <div class="image-fallback" style="${coverUrl ? 'display:none;' : 'display:flex;'} width:100%; height:100%; background:#f3f4f6; align-items:center; justify-content:center; color:#9ca3af; font-size:14px;">
                        <span>Image blocked by Instagram</span>
                    </div>
                    <div class="highlight-overlay">
                        <span>${title}</span>
                    </div>
                </div>
            `;
        }).join('');

        contentGrid.innerHTML = highlightsContent;
    }

    // Legacy function for backward compatibility
    function loadContent(posts) {
        loadPosts(posts);
    }

    // Format numbers (1K, 1M, etc.)
    function formatNumber(num) {
        if (num >= 1000000) {
            return (num / 1000000).toFixed(1) + 'M';
        } else if (num >= 1000) {
            return (num / 1000).toFixed(1) + 'K';
        }
        return num.toString();
    }

    // Open post in new tab
    function openPost(url) {
        window.open(url, '_blank');
    }

    // Story modal functionality
    let currentStories = [];
    let currentStoryIndex = 0;
    let storyProgressInterval;
    let storyAutoAdvanceTimeout;

    // Open story in modal
    function openStory(storyData) {
        // Store all stories for navigation
        currentStories = window.currentProfileData?.stories || [];
        currentStoryIndex = currentStories.findIndex(story => 
            JSON.stringify(story) === JSON.stringify(storyData)
        );
        
        if (currentStoryIndex === -1) {
            console.error('Story not found in current stories');
            return;
        }
        
        showStoryModal(storyData);
    }

    function showStoryModal(storyData) {
        const modal = document.getElementById('storyModal');
        const storyImage = document.getElementById('storyImage');
        const storyVideo = document.getElementById('storyVideo');
        const storyUserAvatar = document.getElementById('storyUserAvatar');
        const storyUsername = document.getElementById('storyUsername');
        const storyTime = document.getElementById('storyTime');
        const storyProgress = document.getElementById('storyProgress');
        
        // Update user info
        const username = window.currentProfileData?.username || 'unknown';
        storyUsername.textContent = `@${username}`;
        storyTime.textContent = '2h ago'; // You can calculate actual time if needed
        storyUserAvatar.src = window.currentProfileData?.profileImage || '';
        
        // Handle story data
        const node = storyData.node || storyData;
        const isVideo = node.is_video || node.media_type === 2;
        const imageVersions = node.image_versions2?.candidates || [];
        const videoVersions = node.video_versions || [];
        
        // Hide both media elements first
        storyImage.style.display = 'none';
        storyVideo.style.display = 'none';
        
        if (isVideo && videoVersions.length > 0) {
            // Show video through proxy
            const videoUrl = videoVersions[0].url;
            storyVideo.src = `/api/image-proxy?url=${encodeURIComponent(videoUrl)}`;
            storyVideo.style.display = 'block';
            storyVideo.load();
        } else if (imageVersions.length > 0) {
            // Show image through proxy
            const imageUrl = imageVersions[0].url;
            storyImage.src = `/api/image-proxy?url=${encodeURIComponent(imageUrl)}`;
            storyImage.style.display = 'block';
        }
        
        // Show modal
        modal.style.display = 'flex';
        
        // Start progress bar (5 seconds for stories)
        startStoryProgress();
        
        // Auto-advance after 5 seconds
        storyAutoAdvanceTimeout = setTimeout(() => {
            nextStory();
        }, 5000);
    }

    function startStoryProgress() {
        const storyProgress = document.getElementById('storyProgress');
        storyProgress.style.width = '0%';
        
        let progress = 0;
        storyProgressInterval = setInterval(() => {
            progress += 2; // 2% per 100ms = 5 seconds total
            storyProgress.style.width = progress + '%';
            
            if (progress >= 100) {
                clearInterval(storyProgressInterval);
            }
        }, 100);
    }

    function nextStory() {
        if (currentStories.length === 0) return;
        
        clearInterval(storyProgressInterval);
        clearTimeout(storyAutoAdvanceTimeout);
        
        currentStoryIndex = (currentStoryIndex + 1) % currentStories.length;
        showStoryModal(currentStories[currentStoryIndex]);
    }

    function previousStory() {
        if (currentStories.length === 0) return;
        
        clearInterval(storyProgressInterval);
        clearTimeout(storyAutoAdvanceTimeout);
        
        currentStoryIndex = currentStoryIndex === 0 ? currentStories.length - 1 : currentStoryIndex - 1;
        showStoryModal(currentStories[currentStoryIndex]);
    }

    function closeStoryModal() {
        const modal = document.getElementById('storyModal');
        modal.style.display = 'none';
        clearInterval(storyProgressInterval);
        clearTimeout(storyAutoAdvanceTimeout);
        
        // Stop video if playing
        const storyVideo = document.getElementById('storyVideo');
        storyVideo.pause();
        storyVideo.currentTime = 0;
    }

    // Post modal functionality
    let currentPostUrl = '';
    
    function openPostModal(postData) {
        const modal = document.getElementById('postModal');
        const postImage = document.getElementById('postModalImage');
        const postVideo = document.getElementById('postModalVideo');
        const postUserAvatar = document.getElementById('postUserAvatar');
        const postUsername = document.getElementById('postUsername');
        const postLikes = document.getElementById('postModalLikes');
        const postComments = document.getElementById('postModalComments');
        const postCaption = document.getElementById('postModalCaption');
        
        // Handle post data
        const node = postData.node || postData;
        const isVideo = node.media_type === 2 || node.is_video;
        const imageVersions = node.image_versions2?.candidates || [];
        const videoVersions = node.video_versions || [];
        const caption = node.caption?.text || '';
        const likes = node.like_count || 0;
        const comments = node.comment_count || 0;
        const postUrl = `https://www.instagram.com/p/${node.code}/`;
        
        // Update user info
        const username = window.currentProfileData?.username || 'unknown';
        postUsername.textContent = `@${username}`;
        postUserAvatar.src = window.currentProfileData?.profileImage || '';
        
        // Update stats
        postLikes.innerHTML = `<i class="fas fa-heart"></i> ${formatNumber(likes)}`;
        postComments.innerHTML = `<i class="fas fa-comment"></i> ${formatNumber(comments)}`;
        postCaption.textContent = caption;
        
        // Store post URL for view button
        currentPostUrl = postUrl;
        
        // Hide both media elements first
        postImage.style.display = 'none';
        postVideo.style.display = 'none';
        
        if (isVideo && videoVersions.length > 0) {
            // Show video through proxy
            const videoUrl = videoVersions[0].url;
            postVideo.src = `/api/image-proxy?url=${encodeURIComponent(videoUrl)}`;
            postVideo.style.display = 'block';
            postVideo.load();
        } else if (imageVersions.length > 0) {
            // Show image through proxy
            const imageUrl = imageVersions[0].url;
            postImage.src = `/api/image-proxy?url=${encodeURIComponent(imageUrl)}`;
            postImage.style.display = 'block';
        }
        
        // Show modal
        modal.style.display = 'flex';
    }
    
    function closePostModal() {
        const modal = document.getElementById('postModal');
        modal.style.display = 'none';
        
        // Stop video if playing
        const postVideo = document.getElementById('postModalVideo');
        postVideo.pause();
        postVideo.currentTime = 0;
    }
    
    function viewPostOnInstagram() {
        if (currentPostUrl) {
            window.open(currentPostUrl, '_blank');
        }
    }

    // Click outside modal to close
    document.getElementById('storyModal').addEventListener('click', function(event) {
        if (event.target === this) {
            closeStoryModal();
        }
    });
    
    document.getElementById('postModal').addEventListener('click', function(event) {
        if (event.target === this) {
            closePostModal();
        }
    });

    // Keyboard navigation for all modals
    document.addEventListener('keydown', function(event) {
        const storyModal = document.getElementById('storyModal');
        const postModal = document.getElementById('postModal');
        
        // Story modal keyboard navigation
        if (storyModal.style.display === 'flex') {
            switch(event.key) {
                case 'ArrowLeft':
                    event.preventDefault();
                    previousStory();
                    break;
                case 'ArrowRight':
                    event.preventDefault();
                    nextStory();
                    break;
                case 'Escape':
                    event.preventDefault();
                    closeStoryModal();
                    break;
            }
        }
        // Post modal keyboard navigation
        else if (postModal.style.display === 'flex') {
            if (event.key === 'Escape') {
                event.preventDefault();
                closePostModal();
            }
        }
    });

    // Open highlight in new tab
    function openHighlight(url) {
        window.open(url, '_blank');
    }

    // Utility functions
    function showMessage(message, type) {
        // Remove existing messages
        const existingMessages = document.querySelectorAll('.message');
        existingMessages.forEach(msg => msg.remove());

        const messageDiv = document.createElement('div');
        messageDiv.className = `message ${type}`;
        messageDiv.textContent = message;

        // Insert after search container
        const searchContainer = document.querySelector('.search-container');
        searchContainer.parentNode.insertBefore(messageDiv, searchContainer.nextSibling);

        // Remove message after 5 seconds
        setTimeout(() => {
            messageDiv.remove();
        }, 5000);
    }

    // Smooth scrolling for anchor links
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();
            const target = document.querySelector(this.getAttribute('href'));
            if (target) {
                target.scrollIntoView({
                    behavior: 'smooth',
                    block: 'start'
                });
            }
        });
    });

    // Add some interactive animations
    function addInteractiveAnimations() {
        // Animate feature cards on scroll
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.style.opacity = '1';
                    entry.target.style.transform = 'translateY(0)';
                }
            });
        }, observerOptions);

        // Observe feature cards and steps
        document.querySelectorAll('.feature-card, .step').forEach(el => {
            el.style.opacity = '0';
            el.style.transform = 'translateY(20px)';
            el.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
            observer.observe(el);
        });
    }

    // Initialize animations when DOM is loaded
    document.addEventListener('DOMContentLoaded', addInteractiveAnimations);

    // Add keyboard navigation for accessibility
    document.addEventListener('keydown', function(e) {
        // ESC key closes FAQ items
        if (e.key === 'Escape') {
            faqItems.forEach(item => {
                item.classList.remove('active');
            });
        }
    });

    // Add focus management for better accessibility
    document.addEventListener('DOMContentLoaded', function() {
        // Add focus indicators
        const focusableElements = document.querySelectorAll('button, input, select, a');
        focusableElements.forEach(el => {
            el.addEventListener('focus', function() {
                this.style.outline = '2px solid #667eea';
                this.style.outlineOffset = '2px';
            });
            
            el.addEventListener('blur', function() {
                this.style.outline = 'none';
            });
        });
    });
</script>